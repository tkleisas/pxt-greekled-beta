//% weight=70 icon="\uf044" color=#EC7505
namespace greekled
{
    
    const chars = " " + "!" + '"' + "#$%&'()*+-./:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ"

    const arr: number[] = [
         0, 0, 0, 0, 0,
         0, 0, 23, 0, 0, //!
         0, 7, 0, 7, 0, // "
        10, 31, 10, 31, 10, // #
        14, 23, 21, 29, 10, // $
        19, 9, 4, 18, 25, // %
        10, 21, 21, 10, 16, // &
         0, 0, 3, 0, 0,   // '
        0, 0, 0, 14, 17, // (
        17, 14, 0, 0, 0, // )
        0, 0, 0, 0, 0,
        0, 5, 2, 5, 0, // +
        4, 4, 31, 4, 4, // -
        0, 24, 0, 0, 0, // .
        16, 8, 4, 2, 1, // /
        0, 0, 1, 0, 0, //:
        0, 16, 10, 0, 0, //;
        0, 4, 10, 17, 0, //<
        0, 10, 10, 10, 0, //=
        0, 17, 10, 4, 0, //>
        2, 1, 21, 5, 2, //?
        14, 21, 27, 31, 14, //@
        30, 5, 5, 30, 0,   //A
        31, 21, 21, 10, 0,   //B
        14, 17, 17, 17, 0,   //C
        31, 17, 17, 14, 0,   //D
        31, 21, 21, 17, 0,   //E
        31, 5, 5, 1, 0,   //F
        14, 17, 17, 21, 12,   //G
        31, 4, 4, 31, 0,   //H
        17, 31, 17, 0, 0,   //I
        9, 17, 17, 15, 1,   //J
        31, 4, 10, 17, 0,   //K
        31, 16, 16, 16, 0,   //L
        31, 2, 4, 2, 31,   //M
        31, 2, 4, 8, 31,   //N
        14, 17, 17, 14, 0,   //O
        31, 5, 5, 2, 0,   //P
        6, 9, 25, 22, 0,   //Q
        31, 5, 5, 10, 16,   //R
        18, 21, 21, 9, 0,   //S
        1, 1, 31, 1, 1,   //T
        15, 16, 16, 15, 0,   //U
        7, 8, 16, 8, 7,   //V
        31, 8, 4, 8, 31,   //W
        27, 4, 4, 27, 0,   //X
        1, 2, 28, 2, 1,   //Y
        25, 21, 19, 17, 0,   //Z
        14, 17, 17, 14, 0,   //0
        0, 18, 31, 16, 0,   //1
        25, 21, 21, 18, 0,   //2
        9, 17, 21, 11, 0,   //3
        12, 10, 9, 31, 8,   //4
        23, 21, 21, 21, 9,   //5
        8, 20, 22, 21, 8,   //6
        17, 9, 5, 3, 1,   //7
        10, 21, 21, 21, 10,   //8
        2, 21, 13, 5, 2,   //9
        30, 5, 5, 30, 0,   //Α
        31, 21, 21, 10, 0,   //Β
        31, 1, 1, 1, 0,   //Γ
        30, 17, 17, 30, 0,   //Δ
        31, 21, 21, 17, 0,   //Ε
        25, 21, 19, 17, 0,   //Ζ
        31, 4, 4, 31, 0,   //Η
        14, 21, 21, 14, 0,   //Θ
        17, 31, 17, 0, 0,   //Ι
        31, 4, 10, 17, 0,   //Κ
        30, 1, 1, 30, 0,   //Λ
        31, 2, 4, 2, 31,   //Μ
        31, 2, 4, 8, 31,   //Ν
        21, 21, 21, 21, 0,   //Ξ
        14, 17, 17, 14, 0,   //Ο
        31, 1, 1, 31, 0,   //Π
        31, 5, 5, 2, 0,   //Ρ
        17, 27, 21, 17, 0,   //Σ
        1, 1, 31, 1, 1,   //Τ
        1, 2, 28, 2, 1,   //Υ
        14, 10, 31, 10, 14,   //Φ
        27, 4, 4, 27, 0,   //Χ
        7, 4, 31, 4, 7,   //Ψ
        23, 21, 21, 23, 0,   //Ω
    ]
    function plotColumn(n: number, column: number) {
        for (let i = 0; i < 5; i++) {
            if ((n & (1 << i)) > 0) {
                led.plot(column, i)
            }
            else {
                led.unplot(column, i)
            }
        }

    }    
    
    
    //% blockId=show_strings block="show string %v"
    export function showString(text: string, time: number = 200): void {
        let c0 = 0;
        let c1 = 0;
        let c2 = 0;
        let c3 = 0;
        let c4 = 0;
        let c5 = 0;

        for (let i = 0; i <= text.length; i++) {

            for (let j = 0; j < 6; j++) {
                c0 = c1;
                c1 = c2;
                c2 = c3;
                c3 = c4;
                c4 = c5;
                if (j == 5) {
                    c5 = 0;
                }
                else {
                    for (let c = 0; c < chars.length; c++) {
                        if (text.substr(i, 1).compare(chars.substr(c, 1)) == 0) {
                            c5 = arr[c * 5 + j]
                            break;
                        }
                        c5 = 0;
                    }
                }
                plotColumn(c4, 4)
                plotColumn(c3, 3)
                plotColumn(c2, 2)
                plotColumn(c1, 1)
                plotColumn(c0, 0)
                basic.pause(time)


            }

        }
    }
}